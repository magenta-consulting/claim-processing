{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{% extends admin.getTemplate('base_list_field') %}

{% block field %}
    {% if object.claimMedias|length %}
        {#<div class="row" style="margin-bottom: 50px;overflow: hidden;clear: both;">#}
            {#<a href="javascript:void(0);"><span class="rotate-img">Rotate Image</span></a>#}
        {#</div>#}
        <div class="row show-image">
            {% set url = getUrlMedia(object.claimMedias[0].media,'default','default_medium') %}
            <a href="{{ url }}" target="_blank"><img class="img-rotate" src="{{ url }}"></a>
        </div>
        <div class="row link-image">
            {% for claimMedia in object.claimMedias %}
                <a href="javascript:void(0);" class="{{ loop.index == 1 ? 'active-image':'' }}"
                   rel="{{ getUrlMedia(claimMedia.media,'default','default_medium') }}">Image {{ loop.index }}</a><br>
            {% endfor %}
        </div>
    {% else %}
        None
    {% endif %}
    <script>
        $(function () {
            $('.link-image a').click(function () {
                var url = $(this).attr('rel');
                $('.link-image a').removeClass('active-image');
                $(this).addClass('active-image');
                $('.show-image img').attr('src', url);
                $('.show-image a').attr('href', url);
            });
//            $(".rotate-img").rotate({
//                bind: {
//                    click: function () {
//                        var from = parseInt($('img.img-rotate').getRotateAngle());
//                        var to = from + 90;
//                        console.log(from);
//                        console.log(to);
//                        $('img.img-rotate').rotate({
//                            angle: from,
//                            animateTo: to
//                        })
//                    }
//                }
//            });
        });

    </script>
    <style>
        .active-image {
            font-weight: bold;
            text-decoration: underline;
        }
    </style>
{% endblock %}
